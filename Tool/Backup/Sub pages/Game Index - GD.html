<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<link href="../Css/Subpages.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../Js/jquery-3.2.1.js"></script>
<script type="text/javascript" src="../Js/script-cp.js"></script>

<!--<img class="Img" src="../Imgs/Flow/[Mulan] Game Flow1.png" onerror="this.src='../Imgs/Source Img/fallback-img-2.png'"/>-->
</head>


<body>
	<!--POP UP - start-->
    <div class="Pop-up-wrapper">
    	<div class="close-button" onclick="Closepopup('0')"><img src="../Imgs/Source Img/Close-button.png" /></div>
        <div class="Pop-up-name-h3">
        	<p class="Pop-up-title">Please name the new Section (and the ordinal)</p>
        	<textarea class="new-h3-name"></textarea>
            <textarea class="new-h3-name"></textarea>
            <button onclick="nameh3('0')">Confirm</button>
        </div>
    </div>
    
    <div class="Pop-up-wrapper">
    	<div class="close-button" onclick="Closepopup('1')"><img src="../Imgs/Source Img/Close-button.png" /></div>
        <div class="Pop-up-name-h3">
        	<p class="Pop-up-title">Please give the ordinal of the section you want to delete</p>
        	<textarea class="new-h3-name"></textarea>
            <button onclick="deletegameIndex('1')">Confirm</button>
        </div>
    </div>  
    
    <div class="Pop-up-wrapper">
    	<div class="close-button" onclick="Closepopup('2')"><img src="../Imgs/Source Img/Close-button.png" /></div>
        <div class="Pop-up-name-h3">
        	<p class="Pop-up-title">Please input Img's name</p>
        	<textarea class="new-h3-name"></textarea>
            <button onclick="addimg(2)">Confirm</button>
        </div>
    </div>
    
    <div class="Pop-up-wrapper">
    	<div class="close-button" onclick="Closepopup('3')"><img src="../Imgs/Source Img/Close-button.png" /></div>
        <div class="Pop-up-name-h3">
        	<p class="Pop-up-title">Please input Game Name</p>
        	<textarea class="new-h3-name"></textarea>
            <button onclick="gamenameIndex(3)">Confirm</button>
        </div>
    </div>  
    
    <div class="Pop-up-wrapper">
            <div class="close-button" onclick="Closepopup('4')"><img src="../Imgs/Source Img/Close-button.png" /></div>
            <div class="Pop-up-name-h3">
                <p class="Pop-up-title">Choose the saved HTML file to load</p>
                <input type="file" class="upload-button" id="files" name="file" value="" />
				<span class="upload-button" id="readBytesButtons"><button>LOAD SAVED FILE</button></span>

            </div>
    </div>
    
    <!--POP UP - end-->

	<!--Control Panel - start-->
    <div class="CP">
    	<div class="CP-items" onclick="popupnameh3(0,3)">Add<br />Game</div>
        <div class="CP-items" onclick="popupnameh3(0,1)">Delete<br />Game</div>
        <div class="CP-items" onclick="popupnameh3(0,4)">LOAD<br />HTML</div>
        <div class="CP-items-save" onclick="downloadindex()">Save</div>
        <div class="CP-items-save" onclick="download2index()">Finalize</div>
    </div>
    <!--Control Panel - end-->
    
    
<div class="wrapper" id="main">
    <span class="tag">Game Design Documents</span><h2 id="Game-name-h2-gamelist">Game Index</h2>
    <span class="content-2">
     
    </span>

</div>
                                                 

<script>

 try{Click();
                    //Loadgamename();
                    Hideall();
                    Countimgclass();}catch(ex){
					
	function readBlob(opt_startByte, opt_stopByte) {

    var files = document.getElementById('files').files;
    if (!files.length) {
      alert('Please select a file!');
      return;
    }

    var file = files[0];
    var start = parseInt(opt_startByte) || 0;
    var stop = parseInt(opt_stopByte) || file.size - 1;

    var reader = new FileReader();

    // If we use onloadend, we need to check the readyState.
    reader.onloadend = function(evt) {
      if (evt.target.readyState == FileReader.DONE) { // DONE == 2
        document.getElementsByClassName('wrapper')[0].innerHTML = evt.target.result;
		//Loadgamename();
		$('.Pop-up-wrapper')[4].setAttribute('style','visibility: hidden');
		
      }
    };

    var blob = file.slice(start, stop + 1);
    reader.readAsBinaryString(blob);
  }
  
  document.querySelector('#readBytesButtons').addEventListener('click', function(evt) {
    if (evt.target.tagName.toLowerCase() == 'button') {
      var startByte = evt.target.getAttribute('data-startbyte');
      var endByte = evt.target.getAttribute('data-endbyte');
      readBlob(startByte, endByte);
    }
  }, false);}

</script>

</body>
</html>
