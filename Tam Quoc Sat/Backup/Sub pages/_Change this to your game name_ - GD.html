<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<link href="../Css/Subpages.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../Js/jquery-3.2.1.js"></script>
<script type="text/javascript" src="../Js/script-cp.js"></script>


<!--<img class="Img" src="../Imgs/Flow/[Mulan] Game Flow1.png" onerror="this.src='../Imgs/Source Img/fallback-img-2.png'"/>-->
</head>

<body>
		<!--POP UP - start-->
    <div class="popup-wrapper-wrapper">
        <div class="Pop-up-wrapper">
            <div class="close-button" onclick="Closepopup('0')"><img src="../Imgs/Source Img/Close-button.png" /></div>
            <div class="Pop-up-name-h3">
                <p class="Pop-up-title">Please name the new Section</p>
                <textarea class="new-h3-name" id="textareanewsection"></textarea>
                <!--<textarea class="new-h3-name"></textarea>-->
                <button onclick="nameh3('0')" id="Confirmnewsection">Confirm</button>
            </div>
        </div>
        
        <div class="Pop-up-wrapper">
            <div class="close-button" onclick="Closepopup('1')"><img src="../Imgs/Source Img/Close-button.png" /></div>
            <div class="Pop-up-name-h3">
                <p class="Pop-up-title">Delete section</p>
                <textarea class="new-h3-name" disabled="disabled">Click CONFIRM to delete last Section</textarea>
                <button onclick="deleteh3('1')">Confirm</button>
            </div>
        </div>  
        
        <div class="Pop-up-wrapper">
            <div class="close-button" onclick="Closepopup('2')"><img src="../Imgs/Source Img/Close-button.png" /></div>
            <div class="Pop-up-name-h3">
                <p class="Pop-up-title">Please input Img's name on the left (The note on the right is optional)</p>
                <textarea class="new-h3-name" id="textareanewimage"></textarea>
                <textarea class="new-h3-name" id="textareanewimagenote"></textarea>
                <button onclick="addimg(2)" id="Confirmnewimage">Confirm</button>
            </div>
        </div>
        
        <div class="Pop-up-wrapper">
            <div class="close-button" onclick="Closepopup('3')"><img src="../Imgs/Source Img/Close-button.png" /></div>
            <div class="Pop-up-name-h3">
                <p class="Pop-up-title">Please input Game Name</p>
                <textarea class="new-h3-name" id="textareanewgamename"></textarea>
                <button onclick="gamename(3)" id="Confirmnewgamename">Confirm</button>
            </div>
        </div>
        
        <div class="Pop-up-wrapper">
            <div class="close-button" onclick="Closepopup('4')"><img src="../Imgs/Source Img/Close-button.png" /></div>
            <div class="Pop-up-name-h3">
                <p class="Pop-up-title">HTML CODE<p style="font-size:16px; margin-bottom:30px;"><a style="color:#27e1fc !important" target="_blank" href="https://www.freeformatter.com/html-formatter.html">Click here to use Online HTML Formatter</a></p></p>
                <textarea class="new-h3-name" id="HTML-code"></textarea>
                <button onclick="SaveHTMLbig(4)" id="Confirmnewbightml">Save HTML</button>
            </div>
        </div>
        <div class="Pop-up-wrapper">
            <div class="close-button" onclick="Closepopup('5')"><img src="../Imgs/Source Img/Close-button.png" /></div>
            <div class="Pop-up-name-h3">
                <p class="Pop-up-title">Please input the link of Videos / Audio</p>
                <textarea class="new-h3-name" id="textareanewvideo"></textarea>
                <button onclick="Videotable()" id="Confirmnewvideo">Save</button>
            </div>
        </div>
        <div class="Pop-up-wrapper">
            <div class="close-button" onclick="Closepopup('6')"><img src="../Imgs/Source Img/Close-button.png" /></div>
            <div class="Pop-up-name-h3">
                <p class="Pop-up-title">Choose the saved HTML file to load</p>
                <input type="file" class="upload-button" id="files" name="file" value="" />
				<span class="upload-button" id="readBytesButtons"><button>LOAD HTML</button></span>

            </div>
        </div>
        
    </div>  
    
    <!--POP UP - end-->

	<!--Control Panel - start-->
    <div class="CP">
    	<div class="CP-items" onclick="popupnameh3(0,3)">Game<br />Name<br />-----<br />Ctrl 1</div>
    	<div class="CP-items" onclick="popupnameh3(0,0)">Add<br />Section<br />-----<br />Ctrl 2</div>
        <div class="CP-items" onclick="popupnameh3(0,1)">Delete<br />Section<br />-----<br />Ctrl 3</div>
        <div class="CP-items" onclick="popuphtmlh3(0,4)">Edit<br />HTML<br />-----<br />Ctrl 4</div>
        <div class="CP-items" onclick="popuphtmlh3(0,6)">LOAD<br />HTML<br />-----<br />Ctrl 5</div>
        <div class="CP-items-save" onclick="download()">Save<br />-----<br />Ctrl 9</div>
        <div class="CP-items-save" onclick="download2()">Finalize<br />-----<br />Ctrl 0</div>
    </div>
    <!--Control Panel - end-->
    
    <a href="" id="temp-memory-ahref-1"><span id="tag-2-active" onclick="return confirm('Your UNSAVED working process will be deleted, do you want to continue?');"><div id="Game-logo-2"><img src="../Imgs/Game logo/Demo-logo.png" /></div><div id="Game-name-tag"></div></span></a>
   
    
    
            
<div class="wrapper" id="main">
<div class="hide-all-h3-content" onclick="Hideall();">HIDE<br /> ALL</div>
	   
    <div class="temp-memory">
        	<span id="temp-memory-ahref-2"></span>
            <span id="temp-memory-logo">Demo</span>
            <span id="temp-memory-name">Game Name</span>
            <span id="temp-memory-name-h2">Please create new game name</span>
    </div>

    <h2 id="Game-name-h2"></h2>
    <span class="content">
    
    
    </span>
 
</div>


<script>


                    try{Click();
                    Loadgamename();
                    Hideall();
                    Countimgclass();}catch(ex){
					
	function readBlob(opt_startByte, opt_stopByte) {

    var files = document.getElementById('files').files;
    if (!files.length) {
      alert('Please select a file!');
      return;
    }

    var file = files[0];
    var start = parseInt(opt_startByte) || 0;
    var stop = parseInt(opt_stopByte) || file.size - 1;

    var reader = new FileReader();

    // If we use onloadend, we need to check the readyState.
    reader.onloadend = function(evt) {
      if (evt.target.readyState == FileReader.DONE) { // DONE == 2
        document.getElementsByClassName('wrapper')[0].innerHTML = evt.target.result;
		Loadgamename();
		$('.Pop-up-wrapper')[6].setAttribute('style','visibility: hidden');
		
      }
    };

    var blob = file.slice(start, stop + 1);
    reader.readAsBinaryString(blob);
  }
  
  document.querySelector('#readBytesButtons').addEventListener('click', function(evt) {
    if (evt.target.tagName.toLowerCase() == 'button') {
      var startByte = evt.target.getAttribute('data-startbyte');
      var endByte = evt.target.getAttribute('data-endbyte');
      readBlob(startByte, endByte);
    }
  }, false);}
  

</script>

<script>
	
	$(document).ready(function(){
                        $("#textareanewsection").keydown(function(e){
                        if (e.which == 13){
                            $('#Confirmnewsection').click();}
                        });
                        
                        $("#textareanewimage").keydown(function(e){
                       if (e.which == 13){
                            $('#Confirmnewimage').click();}
                        });
                        
                        $("#textareanewimagenote").keydown(function(e){
                        if (e.which == 13){
                            $('#Confirmnewimage').click();}
                        });
                        
                        $("#textareanewgamename").keydown(function(e){
                        if (e.which == 13){
                            $('#Confirmnewgamename').click();}
                        });
                        
                        $("#HTML-code").keydown(function(e){
                        if (e.which == 13 && e.ctrlKey){
                            $('#Confirmnewbightml').click();}
                        });
                        
                        $("#textareanewvideo").keydown(function(e){
                        if (e.which == 13){
                            $('#Confirmnewvideo').click();}
                        });	
						
						$("body").keydown(function(e){
                        if (e.which == 49 && e.ctrlKey){
                            $('.CP-items')[0].click();
							$('.new-h3-name')[4].focus();}
                        });	
						
						$("body").keydown(function(e){
                        if (e.which == 50 && e.ctrlKey){
                            $('.CP-items')[1].click();
							$('.new-h3-name')[0].focus();}
                        });	
						
						$("body").keydown(function(e){
                        if (e.which == 51 && e.ctrlKey){
                            $('.CP-items')[2].click();
							$('.new-h3-name')[1].focus();}
                        });
						
						$("body").keydown(function(e){
                        if (e.which == 52 && e.ctrlKey){
                            $('.CP-items')[3].click();
							$('.new-h3-name')[4].focus();}
                        });
						
						$("body").keydown(function(e){
                        if (e.which == 53 && e.ctrlKey){
                            $('.CP-items')[4].click();
							$('.new-h3-name')[5].focus();}
                        });
						
						$("body").keydown(function(e){
                        if (e.which == 57 && e.ctrlKey){
                            $('.CP-items-save')[0].click();}
                        });
						
						$("body").keydown(function(e){
                        if (e.which == 48 && e.ctrlKey){
                            $('.CP-items-save')[1].click();}
                        });
						
						$("body").keydown(function(e){
                        if (e.which == 27){
                            $('.close-button').click();}
                        });
                    
                    });

</script>

</body>
</html>
