<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<link href="../Css/Subpages.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../Js/jquery-3.2.1.js"></script>
<script type="text/javascript" src="../Js/script-cp.js"></script>


<!--<img class="Img" src="../Imgs/Flow/[Mulan] Game Flow1.png" onerror="this.src='../Imgs/Source Img/fallback-img-2.png'"/>-->
</head>

<body>
	<!--POP UP - start-->
    <div class="popup-wrapper-wrapper">
        <div class="Pop-up-wrapper">
            <div class="close-button" onclick="Closepopup('0')"><img src="../Imgs/Source Img/Close-button.png" /></div>
            <div class="Pop-up-name-h3">
                <p class="Pop-up-title">Please name the new Section</p>
                <textarea class="new-h3-name"></textarea>
                <!--<textarea class="new-h3-name"></textarea>-->
                <button onclick="nameh3('0')">Confirm</button>
            </div>
        </div>
        
        <div class="Pop-up-wrapper">
            <div class="close-button" onclick="Closepopup('1')"><img src="../Imgs/Source Img/Close-button.png" /></div>
            <div class="Pop-up-name-h3">
                <p class="Pop-up-title">Delete section</p>
                <textarea class="new-h3-name" disabled="disabled">Click CONFIRM to delete last Section</textarea>
                <button onclick="deleteh3('1')">Confirm</button>
            </div>
        </div>  
        
        <div class="Pop-up-wrapper">
            <div class="close-button" onclick="Closepopup('2')"><img src="../Imgs/Source Img/Close-button.png" /></div>
            <div class="Pop-up-name-h3">
                <p class="Pop-up-title">Please input Img's name</p>
                <textarea class="new-h3-name"></textarea>
                <button onclick="addimg(2)">Confirm</button>
            </div>
        </div>
        
        <div class="Pop-up-wrapper">
            <div class="close-button" onclick="Closepopup('3')"><img src="../Imgs/Source Img/Close-button.png" /></div>
            <div class="Pop-up-name-h3">
                <p class="Pop-up-title">Please input File Name<br /><p style="margin-bottom:50px">Name of the file only, don't need ".html" or " - GD.html"</p></p>
                <textarea class="new-h3-name"></textarea>
                <button onclick="gamename(3)">Confirm</button>
            </div>
        </div>
        
        <div class="Pop-up-wrapper">
            <div class="close-button" onclick="Closepopup('4')"><img src="../Imgs/Source Img/Close-button.png" /></div>
            <div class="Pop-up-name-h3">
                <p class="Pop-up-title">HTML CODE<p style="font-size:16px; margin-bottom:30px;"><a style="color:#27e1fc !important" target="_blank" href="https://www.freeformatter.com/html-formatter.html">Click here to use Online HTML Formatter</a></p></p>
                <textarea class="new-h3-name" id="HTML-code"></textarea>
                <button onclick="SaveHTMLbig(4)">Save HTML</button>
            </div>
        </div>
        <div class="Pop-up-wrapper">
            <div class="close-button" onclick="Closepopup('5')"><img src="../Imgs/Source Img/Close-button.png" /></div>
            <div class="Pop-up-name-h3">
                <p class="Pop-up-title">Please input the link of Videos</p>
                <textarea class="new-h3-name"></textarea>
                <button onclick="Videotable()">Save</button>
            </div>
        </div>
        
    </div>  
    
    <!--POP UP - end-->

	<!--Control Panel - start-->
    <div class="CP-wrapper">
        <div class="CP">
            <div class="CP-items" id="game-name-button" onclick="popupnameh3(0,3)">File Name</div>
            <div class="CP-items" id="finalizehtml-button" onclick="finalizehtml()">Now you can: Finalize HTML</div>
            <div class="CP-items" id="mergehtml-button" onclick="mergehtml()">Now you can: Merge HTML</div>
            <div class="CP-items" id="merge-button" onclick="MergeHTML()">Merge</div>
            <div class="CP-items" id="finalize-button" onclick="FinalizeHTML()">Finalize</div>
            <div class="CP-items-save" id="savemerge-button" onclick="download(' - GD.html')">Save Merged File</div>
            <div class="CP-items-save" id="savefinalize-button" onclick="download('.html')">Save Finalized File</div>
        </div>
    </div>
    <!--Control Panel - end-->

<div class="wrapper" id="main">
	<div id="main-2"></div>
    <h2 id="Game-name-h2-tool">HTML Merging Tool</h2>
    <span class="content">
    <div class="Upload-wrapper">
    	<input type="file" class="upload-button" id="files" name="file" value="" />
		<span class="upload-button" id="readBytesButtons"><button>Upload File</button></span>
    </div>
	
    <div class="Upload-wrapper2">
        <input type="file" class="upload-button" id="files2" name="file2" />
        <span class="upload-button" id="readBytesButtons2"><button>Upload File</button></span>
	</div>

        <textarea class="html-origin-1" placeholder='Input the FIRST PART of HTML SOURCE code here. STOP AT <div class="wrapper" id="main">'></textarea>
        
        <textarea class="html-origin-2" disabled="disabled">

<!-------------------------------- BEGINNING OF THE SECOND PART --------------------------------> 

</div>

<script>

Click();
Loadgamename();
Hideall();
Countimgclass();

</script>

</body>
</html>
        </textarea>
        
        <textarea class="html-origin-3" disabled="disabled">

<!--***************** BEGINNING OF THE SECOND PART (Finalize) *****************--> 

Click();
Loadgamename();
Hideall();
Countimgclass();

</script>

</body>
</html>
        </textarea>
        
        <div style="clear:both"></div>
        
        <textarea class="html-new" placeholder="Input the HTML code of your Newly created HTML file here. You can fine it in TempHTML folder."></textarea>
        
        <div class="html-log"></div>
        
    </span>
</div>

<script>

//popupnameh3(0,3);

 function readBlob(opt_startByte, opt_stopByte) {

    var files = document.getElementById('files').files;
    if (!files.length) {
      alert('Please select a file!');
      return;
    }

    var file = files[0];
    var start = parseInt(opt_startByte) || 0;
    var stop = parseInt(opt_stopByte) || file.size - 1;

    var reader = new FileReader();

    // If we use onloadend, we need to check the readyState.
    reader.onloadend = function(evt) {
      if (evt.target.readyState == FileReader.DONE) { // DONE == 2
        document.getElementsByClassName('html-origin-1')[0].value = evt.target.result;
      }
    };

    var blob = file.slice(start, stop + 1);
    reader.readAsBinaryString(blob);
  }
  
  document.querySelector('#readBytesButtons').addEventListener('click', function(evt) {
    if (evt.target.tagName.toLowerCase() == 'button') {
      var startByte = evt.target.getAttribute('data-startbyte');
      var endByte = evt.target.getAttribute('data-endbyte');
      readBlob(startByte, endByte);
    }
  }, false);
  
   function readBlob2(opt_startByte, opt_stopByte) {

    var files = document.getElementById('files2').files;
    if (!files.length) {
      alert('Please select a file!');
      return;
    }

    var file = files[0];
    var start = parseInt(opt_startByte) || 0;
    var stop = parseInt(opt_stopByte) || file.size - 1;

    var reader = new FileReader();

    // If we use onloadend, we need to check the readyState.
    reader.onloadend = function(evt) {
      if (evt.target.readyState == FileReader.DONE) { // DONE == 2
        document.getElementsByClassName('html-new')[0].value = evt.target.result;
      }
    };

    var blob = file.slice(start, stop + 1);
    reader.readAsBinaryString(blob);
  }
  
  document.querySelector('#readBytesButtons2').addEventListener('click', function(evt) {
    if (evt.target.tagName.toLowerCase() == 'button') {
      var startByte = evt.target.getAttribute('data-startbyte');
      var endByte = evt.target.getAttribute('data-endbyte');
      readBlob2(startByte, endByte);
    }
  }, false);

</script>

</body>
</html>
